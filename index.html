<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spin the Wheel & Questions</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
        }
        .wheel-container {
            position: relative;
            width: 320px;
            height: 320px;
            margin: 0 auto;
            filter: drop-shadow(0 10px 15px rgba(0,0,0,0.15));
        }
        canvas {
            width: 100%;
            height: 100%;
            transition: transform 4s cubic-bezier(0.1, 0, 0.2, 1);
            border-radius: 50%;
        }
        .arrow {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 0; 
            height: 0; 
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-top: 35px solid #1a202c; 
            z-index: 10;
            filter: drop-shadow(0 2px 2px rgba(0,0,0,0.3));
        }
        .center-circle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50px;
            height: 50px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
            z-index: 5;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }
        /* Card Reveal Animation */
        .fade-in-up {
            animation: fadeInUp 0.5s ease-out forwards;
            opacity: 0;
            transform: translateY(20px);
        }
        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .question-item {
            border-left: 4px solid #6366f1;
            background-color: #f8fafc;
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 0 8px 8px 0;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4 text-slate-800">

    <!-- Header -->
    <header class="text-center mb-6">
        <h1 class="text-3xl font-extrabold text-indigo-600 tracking-tight">Synchrony -CBTS</h1>
        <h1 class="text-3xl font-extrabold text-indigo-600 tracking-tight">Spin & Ask</h1>
        <p class="text-slate-500 text-sm mt-1">Spin the wheel to get your topic questions</p>
    </header>

    <!-- Main Layout: Wheel + Controls -->
    <div class="flex flex-col md:flex-row items-start justify-center gap-8 w-full max-w-4xl">
        
        <!-- Left Column: The Wheel -->
        <div class="flex flex-col items-center w-full md:w-1/2">
            <div class="wheel-container">
                <div class="arrow"></div>
                <canvas id="wheelCanvas" width="500" height="500"></canvas>
                <div class="center-circle">â˜…</div>
            </div>

            <button id="spinBtn" class="mt-8 px-8 py-3 bg-indigo-600 hover:bg-indigo-700 active:scale-95 text-white font-bold rounded-full shadow-lg transition-all transform text-lg w-48">
                SPIN
            </button>

            <button onclick="toggleEdit()" class="mt-4 text-xs text-slate-400 underline hover:text-indigo-500">
                Edit Segments
            </button>
        </div>

        <!-- Right Column: Results Area -->
        <div class="w-full md:w-1/2 min-h-[300px]">
            
            <!-- Result Card (Hidden initially) -->
            <div id="resultCard" class="hidden bg-white p-6 rounded-2xl shadow-xl border border-slate-100">
                <div class="text-center border-b pb-4 mb-4">
                    <span class="text-xs font-bold text-slate-400 uppercase tracking-wider">Selected Topic</span>
                    <h2 id="resultTitle" class="text-3xl font-bold text-indigo-600 mt-1">Category</h2>
                </div>
                
                <div id="questionsList" class="space-y-3 text-sm text-slate-700">
                    <!-- Questions injected here -->
                </div>
                
                <div class="mt-6 text-center">
                    <button onclick="resetWheel()" class="text-sm text-slate-400 hover:text-slate-600">
                        Spin Again
                    </button>
                </div>
            </div>

            <!-- Placeholder State -->
            <div id="placeholderState" class="h-full flex flex-col items-center justify-center text-slate-300 border-2 border-dashed border-slate-200 rounded-2xl p-8">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mb-2 opacity-50" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <p>Spin the wheel to reveal questions!</p>
            </div>

            <!-- Edit Modal (Hidden initially) -->
            <div id="editPanel" class="hidden bg-white p-6 rounded-2xl shadow-xl border border-slate-100 w-full">
                <h3 class="font-bold text-lg mb-4">Edit Wheel Segments</h3>
                <div id="editInputs" class="grid grid-cols-1 gap-2 mb-4">
                    <!-- Inputs injected via JS -->
                </div>
                <div class="flex gap-2">
                    <button onclick="saveEdits()" class="flex-1 bg-green-500 text-white py-2 rounded hover:bg-green-600">Save</button>
                    <button onclick="toggleEdit()" class="flex-1 bg-slate-200 text-slate-700 py-2 rounded hover:bg-slate-300">Cancel</button>
                </div>
            </div>

        </div>
    </div>

    <script>
        // --- Configuration ---
        const colors = [
            "#FF6B6B", // Red/Pink
            "#4ECDC4", // Teal
            "#45B7D1", // Blue
            "#96CEB4", // Greenish
            "#FFEEAD", // Yellow
            "#FF9F43"  // Orange
        ];

        // Default Data
        let segments = [
            { label: "NOC", questions: ["What are the main responsibilities of the NOC team in maintaining network uptime and performance?", "How does the NOC detect, prioritize, and respond to network incidents or outages?", "What tools and monitoring systems does the NOC use to ensure network health and security?"] },
            { label: "NIAC", questions: ["How does the Network IaC team automate the deployment and management of network devices and configurations?", "What tools, frameworks, or languages (e.g., Terraform, Ansible, Python) does the team use to implement Infrastructure as Code?", "How does the team ensure version control, compliance, and rollback capability for network configuration changes?"] },
            { label: "NetAuto", questions: ["What types of repetitive network tasks or workflows are automated by the Network Automation team?", "Which automation tools, scripts, or platforms (e.g., Ansible, Python, Netmiko, Nornir) does the team use to streamline network operations?", "How does the team ensure accuracy, safety, and validation when pushing automated changes to the network?"] },
            { label: "CEG", questions:["What types of repetitive network tasks or workflows are automated by the Network Automation team?", "Which automation tools, scripts, or platforms (e.g., Ansible, Python, Netmiko, Nornir) does the team use to streamline network operations?", "How does the team ensure accuracy, safety, and validation when pushing automated changes to the network?"] },
            { label: "NIS", questions:["What types of repetitive network tasks or workflows are automated by the Network Automation team?", "Which automation tools, scripts, or platforms (e.g., Ansible, Python, Netmiko, Nornir) does the team use to streamline network operations?", "How does the team ensure accuracy, safety, and validation when pushing automated changes to the network?"] },
            { label: "NSS", questions:["What types of repetitive network tasks or workflows are automated by the Network Automation team?", "Which automation tools, scripts, or platforms (e.g., Ansible, Python, Netmiko, Nornir) does the team use to streamline network operations?", "How does the team ensure accuracy, safety, and validation when pushing automated changes to the network?"] },
        ];

        // --- Variables ---
        const canvas = document.getElementById('wheelCanvas');
        const ctx = canvas.getContext('2d');
        const spinBtn = document.getElementById('spinBtn');
        const resultCard = document.getElementById('resultCard');
        const placeholderState = document.getElementById('placeholderState');
        const resultTitle = document.getElementById('resultTitle');
        const questionsList = document.getElementById('questionsList');
        
        let currentRotation = 0;
        let isSpinning = false;
        const size = 500;
        const centerX = size / 2;
        const centerY = size / 2;
        const radius = size / 2;

        // --- Initialization ---
        drawWheel();

        // --- Functions ---

        function drawWheel() {
            const arc = (2 * Math.PI) / segments.length;
            
            ctx.clearRect(0, 0, size, size);
            
            // Draw Segments
            segments.forEach((segment, i) => {
                const angle = i * arc;
                ctx.beginPath();
                ctx.fillStyle = colors[i % colors.length];
                ctx.moveTo(centerX, centerY);
                ctx.arc(centerX, centerY, radius, angle, angle + arc);
                ctx.lineTo(centerX, centerY);
                ctx.fill();
                ctx.save();

                // Draw Text
                ctx.translate(centerX, centerY);
                ctx.rotate(angle + arc / 2);
                ctx.textAlign = "right";
                ctx.fillStyle = i === 4 ? "#555" : "#fff"; // Handle the light yellow contrast
                ctx.font = "bold 30px Poppins";
                ctx.fillText(segment.label, radius - 40, 10);
                ctx.restore();
            });
        }

        spinBtn.addEventListener('click', () => {
            if (isSpinning) return;
            
            // Reset UI
            resultCard.classList.add('hidden');
            placeholderState.classList.remove('hidden');
            
            isSpinning = true;
            spinBtn.disabled = true;
            spinBtn.classList.add('opacity-50', 'cursor-not-allowed');

            // Calculate spin
            // Minimum 3 full spins (360 * 3) + random degrees
            const extraSpins = 360 * (3 + Math.floor(Math.random() * 3)); 
            const randomStop = Math.floor(Math.random() * 360);
            const totalSpin = extraSpins + randomStop;
            
            // Update rotation tracking
            currentRotation += totalSpin;

            // Apply CSS transition
            canvas.style.transform = `rotate(${currentRotation}deg)`;

            // Wait for animation end (matches CSS transition time: 4s)
            setTimeout(() => {
                displayResult(currentRotation);
                isSpinning = false;
                spinBtn.disabled = false;
                spinBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            }, 4000); 
        });

        function displayResult(rotation) {
            // Normalize rotation to 0-360
            const actualRotation = rotation % 360;
            
            // In CSS rotate: 0deg is the starting position.
            // Our pointer is at the TOP (270deg relative to standard circle math, or -90).
            // But since we rotated the CANVAS clockwise, the segment at the top is actually:
            // (360 - actualRotation) because the wheel moved right.
            
            // Calculate which index is at the top (Pointer is at 12 o'clock)
            // Each slice is 360 / 6 = 60 deg.
            // If rotation is 0, Index 0 is at 3 o'clock? 
            // Wait, in drawWheel, angle starts at 0 (3 o'clock in standard canvas arc).
            // So index 0 spans 0 to 60 deg.
            // To get Index 0 to the TOP (270 deg / -90 deg), we need to rotate -90.
            
            // Let's rely on the math of the offset.
            // Pointer is static at top. 
            // The canvas coordinate system: 0 is Right, 90 is Down, 180 is Left, 270 is Top.
            // We draw 0 starting at Right. 
            // To point to Top, we need a -90 degree offset logic.
            
            const sliceSize = 360 / segments.length;
            // Calculate the angle of the pointer relative to the rotated wheel
            // Pointer is at 270 degrees (Top) in the Wheel's coordinate space
            let pointerAngle = (270 - (actualRotation % 360));
            if (pointerAngle < 0) pointerAngle += 360;

            const winningIndex = Math.floor(pointerAngle / sliceSize);
            
            const winner = segments[winningIndex];

            // Populate Result
            resultTitle.innerText = winner.label;
            resultTitle.style.color = colors[winningIndex % colors.length];
            
            questionsList.innerHTML = "";
            winner.questions.forEach((q, i) => {
                const qEl = document.createElement('div');
                qEl.className = "question-item";
                qEl.style.borderLeftColor = colors[winningIndex % colors.length];
                qEl.innerText = `${i + 1}. ${q}`;
                questionsList.appendChild(qEl);
            });

            // Show Result
            placeholderState.classList.add('hidden');
            resultCard.classList.remove('hidden');
            resultCard.classList.add('fade-in-up');
        }

        function resetWheel() {
            // Just scrolls smoothly back to top or prepares UI
            resultCard.classList.remove('fade-in-up'); 
            spinBtn.click();
        }

        // --- Editing Logic ---
        const editPanel = document.getElementById('editPanel');
        const editInputs = document.getElementById('editInputs');

        function toggleEdit() {
            if (editPanel.classList.contains('hidden')) {
                // Open Edit
                editPanel.classList.remove('hidden');
                placeholderState.classList.add('hidden');
                resultCard.classList.add('hidden');
                
                // Generate Inputs
                editInputs.innerHTML = '';
                segments.forEach((seg, i) => {
                    const div = document.createElement('div');
                    div.innerHTML = `
                        <input type="text" id="input-${i}" value="${seg.label}" 
                        class="w-full border p-2 rounded text-sm focus:border-indigo-500 outline-none" placeholder="Segment Name">
                    `;
                    editInputs.appendChild(div);
                });
            } else {
                // Close Edit
                editPanel.classList.add('hidden');
                placeholderState.classList.remove('hidden');
            }
        }

        function saveEdits() {
            segments.forEach((seg, i) => {
                const val = document.getElementById(`input-${i}`).value;
                if(val.trim() !== "") {
                    seg.label = val;
                    // If the name changed to something we don't have preset questions for, 
                    // we keep the old questions or default to generic ones.
                    // For simplicity in this demo, we keep the old questions 
                    // (assuming the user is just renaming "Career" to "Work", etc).
                }
            });
            drawWheel();
            toggleEdit();
        }

    </script>
</body>
</html>
